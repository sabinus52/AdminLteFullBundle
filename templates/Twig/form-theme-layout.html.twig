{% extends 'bootstrap_4_layout.html.twig' %}

{% block email_widget -%}
    <div class="input-group">
        <div class="input-group-prepend">
            <span class="input-group-text"><i class="fas fa-envelope"></i></span>
        </div>
        {{- parent() -}}
    </div>
{%- endblock email_widget %}


{% block url_widget -%}
    <div class="input-group">
        <div class="input-group-prepend">
            <span class="input-group-text"><i class="fas fa-globe"></i></span>
        </div>
        {{- parent() -}}
    </div>
{%- endblock url_widget %}


{% block tel_widget -%}
    <div class="input-group">
        <div class="input-group-prepend">
            <span class="input-group-text"><i class="fas fa-phone"></i></span>
        </div>
        {{- parent() -}}
    </div>
{%- endblock tel_widget %}


{% block olix_switch_label -%}
    {{- block('form_label') -}}
{%- endblock olix_switch_label %}

{% block olix_switch_widget -%}
    {%- set attr = attr|merge({class: (attr.class|default('') ~ ' form-control')|trim}) -%}
    {%- set attr = attr|merge({'data-toggle': 'switch'}) -%}
    <div>
        <input type="checkbox" {{ block('widget_attributes') }}{% if value is defined %} value="{{ value }}"{% endif %}{% if checked %} checked="checked"{% endif %} />
    </div>
{%- endblock olix_switch_widget %}


{% block olix_select2_widget -%}
    {%- set attr = attr|merge({class: (attr.class|default('') ~ ' select2')|trim}) -%}
    {% if color != 'default' %}
        {%- set attr = attr|merge({class: (attr.class ~ ' select2-' ~ color)|trim, 'data-dropdown-css-class': 'select2-' ~ color}) -%}
    {% endif %}
    {% if multiple == true and color != 'default' %}
        <div class="select2-{{ color }}">{{- block('choice_widget') -}}</div>
    {% else %}
        {{- block('choice_widget') -}}
    {% endif %}

    {% if ajax_route is defined and ajax_route is not null %}
        {# For remote datas #}
        <script type="text/javascript">
        window.addEventListener("load", function(){

            $('#{{ id }}').select2({
                ajax: {
                    url: '{{ path(ajax_route) }}',
                    dataType: 'json',
                    data: function (params) {
                        return {
                            term: params.term,
                            page: params.page
                        };
                    },
                    processResults: function (data, params) {
                        params.page = params.page || 1;
                        return {
                            results: data.results,
                            pagination: {
                                more: (params.page * {{ ajax_count }}) < data.total
                            }
                        };
                    }
                }
            });

        });
        </script>
    {% endif %}
{%- endblock olix_select2_widget %}


{% block olix_duallistbox_widget -%}
    {%- set attr = attr|merge({class: (attr.class|default('') ~ ' duallistbox')|trim}) -%}
    {{- block('choice_widget') -}}
{%- endblock olix_duallistbox_widget %}
